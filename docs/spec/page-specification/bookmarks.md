# ブックマークページ仕様

## 概要

ブックマークの一覧表示、追加、編集、削除を行うメインページ。

## URL

```
/bookmarks
/bookmarks?search=keyword&tags=tag1,tag2&type=url&favorite=true
```

## 認証

**必要**（未ログインの場合は `/login` へリダイレクト）

---

## ページ構成

### レイアウト

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│ [ブックマーク] [タグ]                              [👤] [⚙️] ログアウト │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 🔍 検索...              [すべて ▼] [⭐] [+ 追加]                            │
│ お気に入りタグ: [JavaScript] [React] [設計] [TypeScript] ...                                │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ★ │ タイトル         │ URL/パス                     📋 │ タグ       │ 操作  │
├───┼────────────────┼─────────────────────────────┼────────────┼────────┤
│ ★ │ Next.js公式ドキュ… │ https://nextjs.org/docs    📋 │ JS, React  │ ✏️ 🗑️  │
├───┼────────────────┼─────────────────────────────┼────────────┼────────┤
│ ☆ │ プロジェクト設計書 │ ~/Documents/design.md     📋 │ 設計       │ ✏️ 🗑️  │
├───┼────────────────┼─────────────────────────────┼────────────┼────────┤
│ ★ │ TypeScript Hand…  │ https://typescriptlang…    📋 │ TS, 公式    │ ✏️ 🗑️  │
└───┴────────────────┴─────────────────────────────┴────────────┴────────┘
│ ← 前へ  1 / 3  次へ →                            全45件中 1-20件を表示    │
└─────────────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────┐
│  ブックマークを追加                                           [↓] │
├────────────────────────────────────────────────────────────────┤
│  URL *                                 タイトル *               │
│  ┌─────────────────────────────────┐   ┌───────────────────┐   │
│  │ https://                        │   │                   │   │
│  └─────────────────────────────────┘   └───────────────────┘   │
│  タグ                                                          │
│  ┌─────────────────────────────────┐                          │
│  │ [JavaScript] [React] [+]        │   ☐ お気に入りに追加        │
│  └─────────────────────────────────┘                          │
│  説明                                                         │
│  ┌─────────────────────────────────┐                          │
│  │                                 │  [ 追加 ]                 │
│  │                                 │  [ キャンセル ]            │
│  └─────────────────────────────────┘                          │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```


### ツールバー（1行目）

| 要素             | 説明                                                               |
| ---------------- | ------------------------------------------------------------------ |
| 検索ボックス     | タイトル、URL/パス、説明文を全文検索。ページ表示時に自動フォーカス |
| タイプフィルター | すべて / URL / ファイル / ネットワーク                             |
| お気に入りボタン | StarIcon クリックでお気に入りのみフィルター                        |
| 追加ボタン       | 新規ブックマーク追加モーダルを開く                                 |

### タグフィルター（2行目）

- 登録済みタグを最大15件まで表示
- クリックでタグを選択/解除（複数選択可）
- 選択中のタグは青色背景でハイライト

### テーブルカラム

| カラム     | 幅   | 説明                                     |
| ---------- | ---- | ---------------------------------------- |
| お気に入り | 32px | StarIcon クリックでトグル（黄色/グレー） |
| タイトル   | 20%  | ブックマーク名（省略時は…）              |
| URL/パス   | 40%  | リンク表示 + CopyIcon コピーボタン       |
| タグ       | 20%  | タグ一覧（最大5件表示、残りは+N）        |
| 操作       | 64px | EditIcon・TrashIcon アイコンボタン       |


### クイック追加メニュー

- ページ下部にアコーディオン形式で展開表示
- 右上に収納ボタンを配置し、クリックで展開/収納可能

| カラム     | 幅   | 説明                                     |
| ---------- | ---- | ---------------------------------------- |
| URL        | auto | ブックマークのURLまたはファイルパス       |
| タイトル   | auto | ブックマークのタイトル                     |
| タグ       | auto | 紐づけるタグ                             |
| お気に入り | 32px | お気に入りに追加するかのチェックボックス       |
| 説明       | auto | ブックマークの説明文                         |
| 操作       | auto | 追加・キャンセルボタン                    |

---

## 機能一覧

### 1. ブックマーク一覧表示

| 項目               | 説明                                                        |
| ------------------ | ----------------------------------------------------------- |
| お気に入りアイコン | StarIcon filled（お気に入り/黄色）/ outlined（通常/グレー） |
| タイトル           | ブックマークのタイトル                                      |
| URL/パス           | リンク表示（クリックで新タブで開く）                        |
| コピーボタン       | CopyIcon URL/パスをクリップボードにコピー                   |
| タグ               | 紐づけられたタグ一覧                                        |
| 操作               | ✏️ 編集・🗑️ 削除アイコンボタン                              |

### 2. 検索

- タイトル、URL/パス、説明文を全文検索
- リアルタイム検索（デバウンス300ms）

### 3. フィルター

| フィルター | 値               | 説明               |
| ---------- | ---------------- | ------------------ |
| type       | all / url / file | ブックマークタイプ |
| favorite   | true / false     | お気に入りのみ     |
| tags       | tag1,tag2        | 指定タグを含む     |

### 4. ソート

| ソート          | 説明                   |
| --------------- | ---------------------- |
| created_at desc | 新しい順（デフォルト） |
| created_at asc  | 古い順                 |
| title asc       | タイトル昇順           |
| title desc      | タイトル降順           |

### 5. ページネーション

- 1ページあたり20件
- 最大100件まで変更可能

---

## ブックマーク追加モーダル

```
┌─────────────────────────────────────────┐
│  ブックマークを追加                  [×] │
├─────────────────────────────────────────┤
│                                         │
│  URL/ファイルパス *                      │
│  ┌─────────────────────────────────┐   │
│  │ https://                        │   │
│  └─────────────────────────────────┘   │
│  タイトル *                             │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│  説明                                   │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│  タグ                                   │
│  ┌─────────────────────────────────┐   │
│  │ [JavaScript] [React] [+]        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ☐ お気に入りに追加                     │
│                                         │
│        [ キャンセル ]  [ 追加 ]         │
└─────────────────────────────────────────┘
```

### 入力フィールド

| フィールド  | 型       | 必須             | バリデーション         |
| ----------- | -------- | ---------------- | ---------------------- |
| type        | radio    | ✓                | 'url' または 'file'    |
| title       | text     | ✓                | 1-200文字              |
| path        | text     | ✓                | 1文字以上              |
| description | textarea | -                | 最大1000文字           |
| tags        | tag[]    | -                | 既存タグまたは新規作成 |
| isFavorite  | checkbox | -                | true/false             |

---

## API連携

### 一覧取得

```
GET /api/bookmarks?search=keyword&type=url&tags=tag1,tag2&page=1&limit=20
```

### 追加

```
POST /api/bookmarks
{
  "type": "url",
  "title": "Next.js公式ドキュメント",
  "path": "https://nextjs.org/docs",
  "description": "Next.jsの公式ドキュメント",
  "tags": ["JavaScript", "React"],
  "isFavorite": false
}
```

### 更新

```
PUT /api/bookmarks/:id
{
  "title": "更新後のタイトル",
  ...
}
```

### 削除

```
DELETE /api/bookmarks/:id
```

### お気に入りトグル

```
PUT /api/bookmarks/:id/favorite
```

---

## 状態管理

| 状態    | 説明              |
| ------- | ----------------- |
| loading | データ読み込み中  |
| error   | エラー発生時      |
| empty   | ブックマークが0件 |
| data    | 正常表示          |

### 空の状態

```
┌─────────────────────────────────────────┐
│                                         │
│          📚 ブックマークがありません      │
│                                         │
│    最初のブックマークを追加しましょう    │
│                                         │
│            [ + 追加する ]               │
│                                         │
└─────────────────────────────────────────┘
```

---

## キーボードショートカット

| キー     | アクション             |
| -------- | ---------------------- |
| `/`      | 検索にフォーカス       |
| `n`      | 新規追加モーダルを開く |
| `Escape` | モーダルを閉じる       |
