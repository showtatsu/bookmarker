# 新規登録ページ仕様

## 概要

新規ユーザーを登録するページ。ユーザー名、メールアドレス、パスワードを入力して登録する。

## URL

```
/signup
```

## 認証

不要（未ログインユーザー向け）

---

## ページ構成

### レイアウト

```
┌─────────────────────────────────────────────────────────────┐
│                        📚 Bookmarker                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                     ┌───────────────────┐                   │
│                     │     新規登録      │                   │
│                     ├───────────────────┤                   │
│                     │                   │                   │
│                     │  ユーザー名       │                   │
│                     │  ┌─────────────┐  │                   │
│                     │  │             │  │                   │
│                     │  └─────────────┘  │                   │
│                     │                   │                   │
│                     │  メールアドレス   │                   │
│                     │  ┌─────────────┐  │                   │
│                     │  │             │  │                   │
│                     │  └─────────────┘  │                   │
│                     │                   │                   │
│                     │  パスワード       │                   │
│                     │  ┌─────────────┐  │                   │
│                     │  │             │  │                   │
│                     │  └─────────────┘  │                   │
│                     │                   │                   │
│                     │  パスワード(確認) │                   │
│                     │  ┌─────────────┐  │                   │
│                     │  │             │  │                   │
│                     │  └─────────────┘  │                   │
│                     │                   │                   │
│                     │  [ 登録する ]     │                   │
│                     │                   │                   │
│                     │  既にアカウントを │                   │
│                     │  お持ちの方は     │                   │
│                     │  ログインへ       │                   │
│                     └───────────────────┘                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## フォーム仕様

### 入力フィールド

| フィールド | 型 | 必須 | バリデーション |
|-----------|-----|------|---------------|
| username | text | ✓ | 3-30文字、英数字・ハイフン・アンダースコアのみ |
| email | email | ✓ | 有効なメールアドレス形式 |
| password | password | ✓ | 8文字以上、大文字・小文字・数字を含む |
| passwordConfirm | password | ✓ | パスワードと一致 |

### バリデーションメッセージ

| フィールド | 条件 | メッセージ |
|-----------|------|-----------|
| username | 未入力 | ユーザー名を入力してください |
| username | 3文字未満 | ユーザー名は3文字以上で入力してください |
| username | 30文字超過 | ユーザー名は30文字以下で入力してください |
| username | 不正な文字 | ユーザー名は英数字、ハイフン、アンダースコアのみ使用できます |
| email | 未入力 | メールアドレスを入力してください |
| email | 不正な形式 | 有効なメールアドレスを入力してください |
| password | 未入力 | パスワードを入力してください |
| password | 8文字未満 | パスワードは8文字以上で入力してください |
| password | 要件不足 | パスワードは大文字、小文字、数字を含む必要があります |
| passwordConfirm | 不一致 | パスワードが一致しません |

### サーバーエラーメッセージ

| 条件 | メッセージ |
|------|-----------|
| ユーザー名重複 | このユーザー名は既に使用されています |
| メール重複 | このメールアドレスは既に使用されています |

---

## API連携

### リクエスト

```
POST /api/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "email": "test@example.com",
  "password": "Password123"
}
```

### 成功レスポンス

```json
{
  "data": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com",
    "createdAt": "2026-01-17T10:30:00.000Z"
  }
}
```

### エラーレスポンス

```json
{
  "error": {
    "code": "CONFLICT",
    "message": "このユーザー名は既に使用されています"
  }
}
```

---

## 状態管理

### ローディング状態

- 登録ボタンをローディング表示に変更
- フォーム入力を無効化

### エラー状態

- フィールドエラー: 該当フィールドの下に赤色で表示
- サーバーエラー: フォーム上部に赤色で表示

### 成功状態

- 成功メッセージを表示
- `/login` ページへリダイレクト（または自動ログイン）

---

## UIコンポーネント

```tsx
<Card>
  <CardHeader>
    <CardTitle>新規登録</CardTitle>
  </CardHeader>
  <CardContent>
    <form onSubmit={handleSubmit}>
      <Input
        label="ユーザー名"
        name="username"
        error={errors.username}
        required
      />
      <Input
        label="メールアドレス"
        name="email"
        type="email"
        error={errors.email}
        required
      />
      <Input
        label="パスワード"
        name="password"
        type="password"
        error={errors.password}
        required
      />
      <Input
        label="パスワード（確認）"
        name="passwordConfirm"
        type="password"
        error={errors.passwordConfirm}
        required
      />
      <Button type="submit" loading={isLoading}>
        登録する
      </Button>
    </form>
    <p>
      既にアカウントをお持ちの方は
      <Link href="/login">ログイン</Link>へ
    </p>
  </CardContent>
</Card>
```

---

## パスワード強度インジケーター（オプション）

```
弱い   ■□□□□
普通   ■■■□□
強い   ■■■■■
```

| 強度 | 条件 |
|------|------|
| 弱い | 8文字未満 |
| 普通 | 8文字以上、大文字・小文字・数字のうち2つ |
| 強い | 12文字以上、大文字・小文字・数字・記号を含む |
