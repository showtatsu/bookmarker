# プロファイルページ仕様

## 概要

ユーザー情報の表示と編集を行うページ。

## URL

```
/profile
```

## 認証

**必要**（未ログインの場合は `/login` へリダイレクト）

---

## ページ構成

### レイアウト

```
┌─────────────────────────────────────────────────────────────┐
│  📚 Bookmarker    [ブックマーク] [タグ] [👤] [⚙️] [ログアウト] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  プロファイル                                               │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  👤  testuser                                       │   │
│  │                                                     │   │
│  │  メールアドレス: test@example.com                   │   │
│  │  登録日: 2026/01/01                                 │   │
│  │                                                     │   │
│  │                          [ プロファイルを編集 ]     │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  統計情報                                                   │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │    📚 45    │  │    🏷️ 12    │  │    ⭐ 8     │        │
│  │ ブックマーク │  │    タグ     │  │ お気に入り  │        │
│  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  パスワード変更                                             │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │                          [ パスワードを変更 ]       │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  アカウント削除                                             │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  ⚠️ アカウントを削除すると、すべてのブックマーク    │   │
│  │  とタグが完全に削除されます。この操作は取り消せ     │   │
│  │  ません。                                           │   │
│  │                                                     │   │
│  │                          [ アカウントを削除 ]       │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 機能一覧

### 1. プロファイル表示

| 項目 | 説明 |
|------|------|
| アバター | ユーザーアイコン（デフォルトまたはGravatar） |
| ユーザー名 | 表示用のユーザー名 |
| メールアドレス | 登録メールアドレス |
| 登録日 | アカウント作成日 |

### 2. 統計情報

| 項目 | 説明 |
|------|------|
| ブックマーク数 | 登録されたブックマークの総数 |
| タグ数 | 作成されたタグの総数 |
| お気に入り数 | お気に入りに登録されたブックマーク数 |

---

## プロファイル編集モーダル

```
┌─────────────────────────────────────────┐
│  プロファイルを編集                  [×] │
├─────────────────────────────────────────┤
│                                         │
│  ユーザー名 *                           │
│  ┌─────────────────────────────────┐   │
│  │ testuser                        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  メールアドレス *                       │
│  ┌─────────────────────────────────┐   │
│  │ test@example.com                │   │
│  └─────────────────────────────────┘   │
│                                         │
│        [ キャンセル ]  [ 保存 ]         │
└─────────────────────────────────────────┘
```

### 入力フィールド

| フィールド | 型 | 必須 | バリデーション |
|-----------|-----|------|---------------|
| username | text | ✓ | 3-30文字、英数字・ハイフン・アンダースコアのみ |
| email | email | ✓ | 有効なメールアドレス形式 |

---

## パスワード変更モーダル

```
┌─────────────────────────────────────────┐
│  パスワードを変更                    [×] │
├─────────────────────────────────────────┤
│                                         │
│  現在のパスワード *                     │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  新しいパスワード *                     │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  新しいパスワード（確認） *             │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│        [ キャンセル ]  [ 変更 ]         │
└─────────────────────────────────────────┘
```

### 入力フィールド

| フィールド | 型 | 必須 | バリデーション |
|-----------|-----|------|---------------|
| currentPassword | password | ✓ | 現在のパスワードと一致 |
| newPassword | password | ✓ | 8文字以上、大文字・小文字・数字を含む |
| confirmPassword | password | ✓ | 新しいパスワードと一致 |

---

## アカウント削除モーダル

```
┌─────────────────────────────────────────┐
│  ⚠️ アカウント削除                   [×] │
├─────────────────────────────────────────┤
│                                         │
│  この操作は取り消せません。             │
│                                         │
│  以下のデータがすべて削除されます：     │
│  • 45件のブックマーク                   │
│  • 12件のタグ                           │
│  • アカウント情報                       │
│                                         │
│  確認のため、ユーザー名を入力して       │
│  ください：                             │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│        [ キャンセル ]  [ 削除 ]         │
└─────────────────────────────────────────┘
```

---

## API連携

### プロファイル取得

```
GET /api/auth/me
```

### プロファイル更新

```
PUT /api/users/me
{
  "username": "newusername",
  "email": "new@example.com"
}
```

### パスワード変更

```
PUT /api/users/me/password
{
  "currentPassword": "OldPassword123",
  "newPassword": "NewPassword456"
}
```

### アカウント削除

```
DELETE /api/users/me
{
  "confirmUsername": "testuser"
}
```
